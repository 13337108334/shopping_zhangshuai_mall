{"ast":null,"code":"import \"core-js/modules/es.json.stringify.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"Person\",\n  //页面初始化数据\n  data: function data() {\n    return {\n      form: {},\n      baseApi: this.$store.state.baseApi,\n      user: localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")) : {}\n    };\n  },\n  methods: {\n    //图片上传成功\n    handleAvatarSuccess: function handleAvatarSuccess(res) {\n      this.imageUrl = res.data;\n      this.form.avatarUrl = this.imageUrl;\n    },\n    //提交事件\n    save: function save() {\n      var _this = this;\n\n      //把表格传给后台，保存到数据库\n      this.request.post(\"/user\", this.form).then(function (res) {\n        if (res.code === '200') {\n          _this.$message.success(\"保存成功\"); //把表格的数据更新到user中\n\n\n          for (var key in _this.form) {\n            _this.user[key] = _this.form[key];\n          } //更新localstorage的user\n\n\n          localStorage.setItem('user', JSON.stringify(_this.user));\n\n          _this.$emit(\"refresh\");\n\n          _this.$router.go(0);\n        } else {\n          _this.$message.error(res.msg);\n        }\n      });\n    }\n  },\n  //页面创建完成\n  created: function created() {\n    var _this2 = this;\n\n    this.request.get(\"/userinfo/\" + this.user.username).then(function (res) {\n      if (res.code === '200') {\n        _this2.form = res.data;\n      } else {\n        alert(res.msg);\n      }\n    }); // this.form = this.user;\n  },\n  computed: {\n    token: function token() {\n      return {\n        token: this.user.token\n      };\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA;AACAA,gBADA;AAEA;AACAC,MAHA,kBAGA;AACA;AACAC,cADA;AAEAC,wCAFA;AAGAC;AAHA;AAMA,GAVA;AAWAC;AACA;AACAC,uBAFA,+BAEAC,GAFA,EAEA;AACA;AACA;AACA,KALA;AAMA;AACAC,QAPA,kBAOA;AAAA;;AACA;AACA;AACA;AACA,yCADA,CAEA;;;AACA;AACA;AACA,WALA,CAMA;;;AACAC;;AACA;;AACA;AACA,SAVA,MAUA;AACA;AACA;AACA,OAdA;AAeA;AAxBA,GAXA;AAqCA;AACAC,SAtCA,qBAsCA;AAAA;;AACA;AACA;AACA;AACA,OAFA,MAEA;AACAC;AACA;AACA,KANA,EADA,CAQA;AACA,GA/CA;AAgDAC;AACAC,SADA,mBACA;AACA;AAAAA;AAAA;AACA;AAHA;AAhDA","names":["name","data","form","baseApi","user","methods","handleAvatarSuccess","res","save","localStorage","created","alert","computed","token"],"sourceRoot":"src/views","sources":["Person.vue"],"sourcesContent":["<!--\n * 个人信息修改页面\n *\n<<<<<<< HEAD\n * @author: ZhangDaYe\n=======\n * @Author: ShanZhu\n>>>>>>> origin/feature_2024_08_24\n * @Date: 2023-11-11\n-->\n<template>\n  <el-card class=\"card\">\n    <div style=\"text-align: center;margin-bottom: 30px\"><b >修改个人信息</b></div>\n\n    <el-form label-width=\"60px\">\n      <el-form-item label=\"头像\">\n        <el-upload\n            class=\"avatar-uploader\"\n            :action=\"baseApi + '/avatar'\"\n            :headers=\"token\"\n            :show-file-list=\"false\"\n            :on-success=\"handleAvatarSuccess\"\n            >\n          <img v-if=\"form.avatarUrl\" :src=\"baseApi + form.avatarUrl\" class=\"avatar\">\n          <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n        </el-upload>\n      </el-form-item>\n\n      <el-form-item label=\"昵称\">\n        <el-input v-model=\"form.nickname\" autocomplete=\"off\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"电话\">\n        <el-input v-model=\"form.phone\" autocomplete=\"off\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"邮箱\">\n        <el-input v-model=\"form.email\" autocomplete=\"off\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"地址\">\n        <el-input v-model=\"form.address\" autocomplete=\"off\"></el-input>\n      </el-form-item>\n      <el-button type=\"primary\" style=\"margin-left: 190px;margin-top: 20px\" @click=\"save\">确 定</el-button>\n    </el-form>\n  </el-card>\n\n</template>\n\n<script>\nexport default {\n  name: \"Person\",\n  //页面初始化数据\n  data(){\n    return{\n      form: {},\n      baseApi: this.$store.state.baseApi,\n      user: localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")) : {},\n\n    }\n  },\n  methods:{\n    //图片上传成功\n    handleAvatarSuccess(res) {\n      this.imageUrl = res.data;\n      this.form.avatarUrl = this.imageUrl;\n    },\n    //提交事件\n    save(){\n      //把表格传给后台，保存到数据库\n      this.request.post(\"/user\",this.form).then(res=>{\n        if(res.code==='200'){\n          this.$message.success(\"保存成功\");\n          //把表格的数据更新到user中\n          for (let key in this.form){\n            this.user[key] = this.form[key];\n          }\n          //更新localstorage的user\n          localStorage.setItem('user',JSON.stringify(this.user));\n          this.$emit(\"refresh\")\n          this.$router.go(0);\n        }else{\n          this.$message.error(res.msg)\n        }\n      })\n    },\n  },\n  //页面创建完成\n  created() {\n    this.request.get(\"/userinfo/\"+this.user.username).then(res=>{\n      if(res.code==='200'){\n        this.form = res.data;\n      }else{\n        alert(res.msg)\n      }\n    })\n    // this.form = this.user;\n  },\n  computed:{\n    token() {\n      return{ token: this.user.token}\n    }\n  }\n}\n</script>\n\n<style scoped>\n.card{\n  width: 500px;\n  margin: 80px auto;\n  padding: 30px;\n}\n.avatar-uploader {\n  padding-bottom: 10px;\n}\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409EFF;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 138px;\n  height: 138px;\n  line-height: 138px;\n  text-align: center;\n}\n.avatar {\n  width: 138px;\n  height: 138px;\n  display: block;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}