{"ast":null,"code":"import \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.array.map.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"User\",\n\n  /*页面创建完成动作*/\n  created: function created() {\n    this.load();\n  },\n\n  /*初始化数据*/\n  data: function data() {\n    return {\n      tableData: [],\n      roleOptions: [{\n        value: 'admin',\n        label: '管理员'\n      }, {\n        value: 'user',\n        label: '用户'\n      }],\n      roleValue: '',\n      total: 0,\n      pageSize: 5,\n      currentPage: 1,\n      searchMode: 'id',\n      searchParams: {\n        id: '',\n        username: '',\n        nickname: ''\n      },\n      dialogFormVisible: false,\n      dialogTitle: '',\n      user: {},\n      multipleSelection: []\n    };\n  },\n\n  /*方法*/\n  methods: {\n    handleSizeChange: function handleSizeChange(pageSize) {\n      this.pageSize = pageSize;\n      this.load();\n    },\n\n    /*分页跳转*/\n    handleCurrentPage: function handleCurrentPage(currentPage) {\n      this.currentPage = currentPage;\n      this.load();\n    },\n\n    /*筛选*/\n    handleSelectionChange: function handleSelectionChange(val) {\n      this.multipleSelection = val;\n    },\n\n    /*加载数据*/\n    load: function load() {\n      var _this = this;\n\n      this.request.get(\"/user/page\", {\n        params: {\n          pageNum: this.currentPage,\n          pageSize: this.pageSize,\n          id: this.searchParams.id,\n          username: this.searchParams.username,\n          nickname: this.searchParams.nickname\n        }\n      }).then(function (res) {\n        if (res.code === '200') {\n          _this.tableData = res.data.records;\n          _this.total = res.data.total;\n        }\n      });\n    },\n\n    /*搜索*/\n    search: function search() {\n      this.currentPage = 1;\n      this.load();\n    },\n\n    /*重新加载*/\n    reload: function reload() {\n      this.searchParams.id = '';\n      this.searchParams.username = '';\n      this.searchParams.nickname = '';\n      this.load();\n    },\n\n    /*新增用户*/\n    save: function save() {\n      var _this2 = this;\n\n      this.dialogTitle = '新增用户';\n      this.request.post(\"/user\", this.user).then(function (res) {\n        if (res.code === '200') {\n          _this2.$message.success(\"保存成功\");\n\n          _this2.dialogFormVisible = false;\n\n          _this2.load();\n        } else {\n          _this2.$message.error(res.msg);\n        }\n      });\n    },\n\n    /*新增用户弹窗*/\n    handleAdd: function handleAdd() {\n      this.dialogTitle = '新增用户';\n      this.dialogFormVisible = true;\n      this.user = {};\n    },\n\n    /*编辑用户*/\n    handleEdit: function handleEdit(row) {\n      this.user = JSON.parse(JSON.stringify(row));\n      this.dialogTitle = '编辑用户';\n      this.dialogFormVisible = true;\n    },\n\n    /*删除用户*/\n    handleDelete: function handleDelete(id) {\n      var _this3 = this;\n\n      this.$confirm('确认删除该用户吗?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        _this3.request.delete(\"/user/\" + id).then(function (res) {\n          if (res.code === '200') {\n            _this3.$message({\n              type: \"success\",\n              message: \"删除成功\"\n            });\n\n            _this3.load();\n          } else {\n            _this3.$message.error(res.msg);\n          }\n        });\n      });\n    },\n\n    /*批量删除*/\n    delBatch: function delBatch() {\n      var _this4 = this;\n\n      var ids = this.multipleSelection.map(function (v) {\n        return v.id;\n      });\n      this.$confirm('确认删除这些用户吗?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        _this4.request.post(\"/user/del/batch\", ids).then(function (res) {\n          if (res.code === '200') {\n            _this4.$message({\n              type: \"success\",\n              message: \"删除成功\",\n              duration: 3000\n            });\n\n            _this4.load();\n          } else {\n            _this4.$message.error(res.msg);\n          }\n        });\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmHA;AACAA,cADA;;AAEA;AACAC,SAHA,qBAGA;AACA;AACA,GALA;;AAMA;AACAC,MAPA,kBAOA;AACA;AACAC,mBADA;AAEAC;AACAC,sBADA;AAEAC;AAFA,SAGA;AACAD,qBADA;AAEAC;AAFA,OAHA,CAFA;AAUAC,mBAVA;AAWAC,cAXA;AAYAC,iBAZA;AAaAC,oBAbA;AAcAC,sBAdA;AAeAC;AACAC,cADA;AAEAC,oBAFA;AAGAC;AAHA,OAfA;AAoBAC,8BApBA;AAqBAC,qBArBA;AAsBAC,cAtBA;AAuBAC;AAvBA;AAyBA,GAjCA;;AAkCA;AACAC;AACAC,oBADA,4BACAZ,QADA,EACA;AACA;AACA;AACA,KAJA;;AAKA;AACAa,qBANA,6BAMAZ,WANA,EAMA;AACA;AACA;AACA,KATA;;AAUA;AACAa,yBAXA,iCAWAC,GAXA,EAWA;AACA;AACA,KAbA;;AAcA;AACAC,QAfA,kBAeA;AAAA;;AACA;AACAC;AACAC,mCADA;AAEAlB,iCAFA;AAGAI,kCAHA;AAIAC,8CAJA;AAKAC;AALA;AADA,SAQAa,IARA,CAQA;AACA;AACA;AACA;AACA;AACA,OAbA;AAeA,KA/BA;;AAgCA;AACAC,UAjCA,oBAiCA;AACA;AACA;AACA,KApCA;;AAqCA;AACAC,UAtCA,oBAsCA;AACA;AACA;AACA;AACA;AACA,KA3CA;;AA4CA;AACAC,QA7CA,kBA6CA;AAAA;;AACA;AACA;AACA;AACA;;AACA;;AACA;AACA,SAJA,MAIA;AACA;AACA;AACA,OARA;AASA,KAxDA;;AAyDA;AACAC,aA1DA,uBA0DA;AACA;AACA;AACA;AAEA,KA/DA;;AAgEA;AACAC,cAjEA,sBAiEAC,GAjEA,EAiEA;AACA;AACA;AACA;AACA,KArEA;;AAsEA;AACAC,gBAvEA,wBAuEAtB,EAvEA,EAuEA;AAAA;;AACA;AACAuB,+BADA;AAEAC,8BAFA;AAGAC;AAHA,SAIAV,IAJA,CAIA;AACA;AACA;AACA;AACAU,6BADA;AAEAC;AAFA;;AAIA;AACA,WANA,MAMA;AACA;AACA;AACA,SAVA;AAWA,OAhBA;AAiBA,KAzFA;;AA0FA;AACAC,YA3FA,sBA2FA;AAAA;;AACA;AAAA;AAAA;AACA;AACAJ,+BADA;AAEAC,8BAFA;AAGAC;AAHA,SAIAV,IAJA,CAIA;AACA;AACA;AACA;AACAU,6BADA;AAEAC,6BAFA;AAGAE;AAHA;;AAKA;AACA,WAPA,MAOA;AACA;AACA;AACA,SAXA;AAYA,OAjBA;AAkBA;AA/GA;AAnCA","names":["name","created","data","tableData","roleOptions","value","label","roleValue","total","pageSize","currentPage","searchMode","searchParams","id","username","nickname","dialogFormVisible","dialogTitle","user","multipleSelection","methods","handleSizeChange","handleCurrentPage","handleSelectionChange","val","load","params","pageNum","then","search","reload","save","handleAdd","handleEdit","row","handleDelete","confirmButtonText","cancelButtonText","type","message","delBatch","duration"],"sourceRoot":"src/views/manage","sources":["User.vue"],"sourcesContent":["<!--\r\n * 用户管理页面\r\n *\r\n * @author: ZhangDaYe\r\n * @Date: 2023-11-11\r\n-->\r\n<template>\r\n<div>\r\n\r\n  <!--搜索下拉框-->\r\n  <div class=\"demo-input-size\">\r\n    <el-select v-model=\"searchMode\" placeholder=\"请选择\" style=\"width: 150px;margin-right: 10px\">\r\n      <el-option value=\"id\" label=\"用户id\"></el-option>\r\n      <el-option value=\"username\" label=\"账号\"></el-option>\r\n      <el-option value=\"nickname\" label=\"昵称\"></el-option>\r\n    </el-select>\r\n    <el-input v-if=\"searchMode==='id'\" placeholder=\"请输入用户id\" prefix-icon=\"el-icon-search\" style=\"width: 250px;padding-right: 5px\" v-model=\"searchParams.id\"></el-input>\r\n    <el-input v-if=\"searchMode==='nickname'\" placeholder=\"请输入昵称\" prefix-icon=\"el-icon-search\" style=\"width: 250px;padding-right: 5px\" v-model=\"searchParams.nickname\"></el-input>\r\n    <el-button round type=\"primary\" @click=\"search\">搜索</el-button>\r\n    <el-button round type=\"info\" @click=\"reload\">重置</el-button>\r\n  </div>\r\n\r\n  <!--按钮栏-->\r\n  <div style=\"padding-top: 10px\">\r\n    <el-button style=\"margin: 5px;width: 100px\" round type=\"success\" @click=\"handleAdd\"><i class=\"el-icon-circle-plus\"style=\"padding-right: 6px\"></i>新增</el-button>\r\n    <el-button style=\"margin: 5px;width: 120px\" round type=\"danger\" @click=\"delBatch\"><i class=\"el-icon-remove\" style=\"padding-right: 6px\"></i>批量删除</el-button>\r\n  </div>\r\n\r\n  <!--新增用户弹窗-->\r\n  <el-dialog :title=\"dialogTitle\" :visible.sync=\"dialogFormVisible\">\r\n    <el-form label-width=\"50px\" style=\"padding: 0 60px\">\r\n      <el-form-item label=\"昵称\">\r\n        <el-input v-model=\"user.nickname\" autocomplete=\"off\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"身份\">\r\n        <el-select v-model=\"user.role\" placeholder=\"请选择\">\r\n          <el-option\r\n              v-for=\"item in roleOptions\"\r\n              :key=\"item.value\"\r\n              :label=\"item.label\"\r\n              :value=\"item.value\">\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"电话\">\r\n        <el-input v-model=\"user.phone\" autocomplete=\"off\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"邮箱\">\r\n        <el-input v-model=\"user.email\" autocomplete=\"off\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"地址\">\r\n        <el-input v-model=\"user.address\" autocomplete=\"off\"></el-input>\r\n      </el-form-item>\r\n\r\n    </el-form>\r\n\r\n    <div slot=\"footer\" class=\"dialog-footer\">\r\n      <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n      <el-button type=\"primary\" @click=\"save\">确 定</el-button>\r\n    </div>\r\n\r\n  </el-dialog>\r\n\r\n  <!--用户表格列表-->\r\n  <el-table stripe border fixed size=\"medium\" :data=\"tableData\" background-color=\"black\" @selection-change=\"handleSelectionChange\">\r\n    <el-table-column type=\"selection\" ></el-table-column>\r\n      <el-table-column prop=\"id\" label=\"id\" width=\"50\" ></el-table-column>\r\n    <el-table-column prop=\"username\" label=\"账号\" width=\"100\" ></el-table-column>\r\n\r\n    <el-table-column label=\"身份\" width=\"100\" >\r\n      <template slot-scope=\"scope\">\r\n        <span v-if=\"scope.row.role==='user'\">用户</span>\r\n        <span v-if=\"scope.row.role==='admin'\">管理员</span>\r\n      </template>\r\n    </el-table-column>\r\n\r\n    <el-table-column prop=\"nickname\" label=\"昵称\" width=\"100\" ></el-table-column>\r\n    <el-table-column prop=\"phone\" label=\"电话\" width=\"180\" ></el-table-column>\r\n    <el-table-column prop=\"email\" label=\"邮箱\" width=\"180\" ></el-table-column>\r\n    <el-table-column prop=\"address\" label=\"地址\" width=\"200\" ></el-table-column>\r\n\r\n    <el-table-column label=\"操作\">\r\n      <template slot-scope=\"scope\">\r\n        <el-button\r\n            size=\"mini\"\r\n            type=\"success\"\r\n            @click=\"handleEdit(scope.row)\">编辑</el-button>\r\n        <el-button\r\n            size=\"mini\"\r\n            type=\"danger\"\r\n            @click=\"handleDelete(scope.row.id)\">删除</el-button>\r\n      </template>\r\n    </el-table-column>\r\n\r\n  </el-table>\r\n\r\n  <!--分页控件-->\r\n  <div class=\"block\" style=\"flex: 0 0 auto\">\r\n    <el-pagination\r\n        :current-page=\"currentPage\"\r\n        :page-sizes=\"[3, 5, 8, 10]\"\r\n        :page-size=\"pageSize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"total\"\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentPage\"\r\n    >\r\n    </el-pagination>\r\n  </div>\r\n\r\n</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"User\",\r\n  /*页面创建完成动作*/\r\n  created() {\r\n    this.load();\r\n  },\r\n  /*初始化数据*/\r\n  data(){\r\n    return{\r\n      tableData: [],\r\n      roleOptions: [{\r\n        value: 'admin',\r\n        label: '管理员'\r\n      }, {\r\n        value: 'user',\r\n        label: '用户'\r\n      },\r\n      ],\r\n      roleValue: '',\r\n      total: 0,\r\n      pageSize: 5,\r\n      currentPage: 1,\r\n      searchMode: 'id',\r\n      searchParams:{\r\n        id: '',\r\n        username: '',\r\n        nickname: ''\r\n      },\r\n      dialogFormVisible: false,\r\n      dialogTitle: '',\r\n      user: {},\r\n      multipleSelection: []\r\n    }\r\n  },\r\n  /*方法*/\r\n  methods:{\r\n    handleSizeChange(pageSize){\r\n      this.pageSize = pageSize;\r\n      this.load();\r\n    },\r\n    /*分页跳转*/\r\n    handleCurrentPage(currentPage){\r\n      this.currentPage = currentPage;\r\n      this.load();\r\n    },\r\n    /*筛选*/\r\n    handleSelectionChange(val){\r\n      this.multipleSelection = val\r\n    },\r\n    /*加载数据*/\r\n    load(){\r\n      this.request.get(\"/user/page\",{\r\n        params:{\r\n          pageNum: this.currentPage,\r\n          pageSize: this.pageSize,\r\n          id: this.searchParams.id,\r\n          username: this.searchParams.username,\r\n          nickname: this.searchParams.nickname\r\n        }\r\n      }).then(res=>{\r\n            if(res.code==='200'){\r\n              this.tableData = res.data.records;\r\n              this.total = res.data.total;\r\n            }\r\n          }\r\n      )\r\n    },\r\n    /*搜索*/\r\n    search(){\r\n      this.currentPage = 1;\r\n      this.load();\r\n    },\r\n    /*重新加载*/\r\n    reload(){\r\n      this.searchParams.id='';\r\n      this.searchParams.username='';\r\n      this.searchParams.nickname='';\r\n      this.load()\r\n    },\r\n    /*新增用户*/\r\n    save(){\r\n      this.dialogTitle='新增用户'\r\n      this.request.post(\"/user\",this.user).then(res=>{\r\n        if(res.code==='200'){\r\n          this.$message.success(\"保存成功\");\r\n          this.dialogFormVisible = false;\r\n          this.load();\r\n        }else{\r\n          this.$message.error(res.msg)\r\n        }\r\n      })\r\n    },\r\n    /*新增用户弹窗*/\r\n    handleAdd(){\r\n      this.dialogTitle='新增用户'\r\n      this.dialogFormVisible = true;\r\n      this.user = {};\r\n\r\n    },\r\n    /*编辑用户*/\r\n    handleEdit(row){\r\n      this.user = JSON.parse(JSON.stringify(row));\r\n      this.dialogTitle='编辑用户';\r\n      this.dialogFormVisible = true;\r\n    },\r\n    /*删除用户*/\r\n    handleDelete(id){\r\n      this.$confirm('确认删除该用户吗?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        this.request.delete(\"/user/\"+id).then(res=>{\r\n          if(res.code==='200'){\r\n            this.$message({\r\n              type: \"success\",\r\n              message: \"删除成功\",\r\n            });\r\n            this.load();\r\n          }else {\r\n            this.$message.error(res.msg);\r\n          }\r\n        })\r\n      })\r\n    },\r\n    /*批量删除*/\r\n    delBatch(){\r\n      let ids = this.multipleSelection.map(v => v.id);\r\n      this.$confirm('确认删除这些用户吗?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        this.request.post(\"/user/del/batch\",ids).then(res=>{\r\n          if(res.code==='200'){\r\n            this.$message({\r\n              type: \"success\",\r\n              message: \"删除成功\",\r\n              duration: 3000\r\n            });\r\n            this.load();\r\n          }else {\r\n            this.$message.error(res.msg);\r\n          }\r\n        })\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]},"metadata":{},"sourceType":"module"}