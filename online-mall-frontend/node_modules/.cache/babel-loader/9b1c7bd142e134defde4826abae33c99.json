{"ast":null,"code":"import \"core-js/modules/es.number.constructor.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport search from \"../../../components/Search\";\nexport default {\n  name: \"GoodList\",\n  data: function data() {\n    return {\n      //分类icon，每个icon包含id、value、categories对象数组.category：id，name\n      icons: [],\n      total: 0,\n      pageSize: 9,\n      currentPage: 1,\n      //选择的分类\n      categoryId: Number,\n      //搜索的内容\n      searchText: \"\",\n      good: [],\n      baseApi: this.$store.state.baseApi\n    };\n  },\n  components: {\n    search: search\n  },\n  created: function created() {\n    //二者一般不同时存在\n    this.searchText = this.$route.query.searchText;\n    this.categoryId = this.$route.query.categoryId;\n    this.loadCategories();\n    this.load();\n  },\n  methods: {\n    loadCategories: function loadCategories() {\n      var _this = this;\n\n      this.request.get(\"/api/icon\").then(function (res) {\n        if (res.code === \"200\") {\n          _this.icons = res.data;\n        }\n      });\n    },\n    handleCurrentPage: function handleCurrentPage(currentPage) {\n      this.currentPage = currentPage;\n      this.load();\n    },\n    handleSearch: function handleSearch(text) {\n      this.searchText = text;\n      this.load();\n    },\n    load: function load(categoryId) {\n      var _this2 = this;\n\n      if (categoryId != undefined) {\n        this.categoryId = categoryId;\n        this.$router.push({\n          path: \"/goodlist\",\n          query: {\n            categoryId: this.categoryId\n          }\n        });\n      }\n\n      this.request.get(\"/api/good/page\", {\n        params: {\n          pageNum: this.currentPage,\n          pageSize: this.pageSize,\n          searchText: this.searchText,\n          categoryId: this.categoryId\n        }\n      }).then(function (res) {\n        if (res.code === \"200\") {\n          _this2.total = res.data.total;\n          _this2.good = res.data.records;\n        }\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmFA;AACA;AACAA,kBADA;AAEAC,MAFA,kBAEA;AACA;AACA;AACAC,eAFA;AAGAC,cAHA;AAIAC,iBAJA;AAKAC,oBALA;AAMA;AACAC,wBAPA;AAQA;AACAC,oBATA;AAUAC,cAVA;AAWAC;AAXA;AAaA,GAhBA;AAiBAC;AACAC;AADA,GAjBA;AAoBAC,SApBA,qBAoBA;AACA;AACA;AACA;AAEA;AACA;AACA,GA3BA;AA4BAC;AACAC,kBADA,4BACA;AAAA;;AACA;AACA;AACA;AACA;AACA,OAJA;AAKA,KAPA;AAQAC,qBARA,6BAQAV,WARA,EAQA;AACA;AACA;AACA,KAXA;AAYAW,gBAZA,wBAYAC,IAZA,EAYA;AACA;AACA;AACA,KAfA;AAgBAC,QAhBA,gBAgBAZ,UAhBA,EAgBA;AAAA;;AACA;AACA;AAEA;AACAa,2BADA;AAEAC;AAAAd;AAAA;AAFA;AAIA;;AACA,mBACAe,GADA,CACA,gBADA,EACA;AACAC;AACAC,mCADA;AAEAnB,iCAFA;AAGAG,qCAHA;AAIAD;AAJA;AADA,OADA,EASAkB,IATA,CASA;AACA;AACA;AACA;AACA;AACA,OAdA;AAeA;AAxCA;AA5BA","names":["name","data","icons","total","pageSize","currentPage","categoryId","searchText","good","baseApi","components","search","created","methods","loadCategories","handleCurrentPage","handleSearch","text","load","path","query","get","params","pageNum","then"],"sourceRoot":"src/views/front/good","sources":["GoodList.vue"],"sourcesContent":["<!--\n * 商品列表\n *\n * @author: ZhangDaYe\n * @Date: 2023-11-11\n-->\n<template>\n  <div>\n    <search @search=\"handleSearch\"></search>\n\n    <div class=\"main-box\">\n      <div style=\"margin: 20px auto\">\n\n        <h2 style=\"color: #e75c09\">商品分类</h2>\n\n        <!--商品类别菜单-->\n        <el-row :gutter=\"20\" style=\"font-size: 18px;\">\n\n          <el-col v-for=\"(item, index) in icons\" :key=\"index\" :span=\"6\">\n            <i class=\"iconfont\" v-html=\"item.value\"></i>\n            <span v-for=\"(category, index2) in item.categories\" :key=\"index2\">\n              <b>\n                <a href=\"#\"\n                  @click.prevent=\"load(category.id)\"\n                  :class=\"{\n                    black: categoryId == category.id,\n                    grey: categoryId != category.id,\n                  }\"\n                >\n                  <span style=\"color: #3186cb\">{{ category.name }}</span>\n                </a>\n              </b>\n              <span v-if=\"index2 != item.categories.length - 1\"> / </span>\n            </span>\n          </el-col>\n\n        </el-row>\n\n        <hr/>\n\n        <el-row :gutter=\"20\">\n\n          <el-col\n            :span=\"6\"\n            v-for=\"good in good\"\n            :key=\"good.id\"\n            style=\"margin-bottom: 20px\"\n          >\n            <!--商品格子-->\n            <router-link :to=\"'goodview/' + good.id\">\n              <el-card :body-style=\"{ padding: '0px', background: '#3186cb' }\">\n                <img\n                  :src=\"baseApi + good.imgs\"\n                  style=\"width: 100%; height: 300px\"\n                />\n                <div style=\"padding: 5px 10px\">\n                  <span style=\"font-size: 18px;color: #ffffff\">{{ good.name }}</span><br/>\n                  <span style=\"color: #ffffff; font-size: 15px\">￥{{ good.price }}</span>\n                </div>\n              </el-card>\n            </router-link>\n          </el-col>\n\n        </el-row>\n      </div>\n      <!--分页控件-->\n      <div class=\"block\" style=\"text-align: center\">\n        <el-pagination\n          background\n          :hide-on-single-page=\"false\"\n          :current-page=\"currentPage\"\n          :page-size=\"pageSize\"\n          layout=\"total, prev, pager, next\"\n          :total=\"total\"\n          @current-change=\"handleCurrentPage\"\n        >\n        </el-pagination>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport search from \"../../../components/Search\";\nexport default {\n  name: \"GoodList\",\n  data() {\n    return {\n      //分类icon，每个icon包含id、value、categories对象数组.category：id，name\n      icons: [],\n      total: 0,\n      pageSize: 9,\n      currentPage: 1,\n      //选择的分类\n      categoryId: Number,\n      //搜索的内容\n      searchText: \"\",\n      good: [],\n      baseApi: this.$store.state.baseApi,\n    };\n  },\n  components: {\n    search,\n  },\n  created() {\n    //二者一般不同时存在\n    this.searchText = this.$route.query.searchText;\n    this.categoryId = this.$route.query.categoryId;\n\n    this.loadCategories();\n    this.load();\n  },\n  methods: {\n    loadCategories() {\n      this.request.get(\"/api/icon\").then((res) => {\n        if (res.code === \"200\") {\n          this.icons = res.data;\n        }\n      });\n    },\n    handleCurrentPage(currentPage) {\n      this.currentPage = currentPage;\n      this.load();\n    },\n    handleSearch(text) {\n      this.searchText = text;\n      this.load();\n    },\n    load(categoryId) {\n      if (categoryId != undefined) {\n        this.categoryId = categoryId;\n\n        this.$router.push({\n          path: \"/goodlist\",\n          query: { categoryId: this.categoryId },\n        });\n      }\n      this.request\n        .get(\"/api/good/page\", {\n          params: {\n            pageNum: this.currentPage,\n            pageSize: this.pageSize,\n            searchText: this.searchText,\n            categoryId: this.categoryId,\n          },\n        })\n        .then((res) => {\n          if (res.code === \"200\") {\n            this.total = res.data.total;\n            this.good = res.data.records;\n          }\n        });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.main-box {\n  background-color: white;\n  border: white 2px solid;\n  border-radius: 40px;\n  padding: 20px 40px;\n  margin: 5px auto;\n}\n\n.black {\n  color: black;\n}\n\n.grey {\n  color: grey;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}