{"ast":null,"code":"import \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.json.stringify.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport icons from \"@/utils/icons\";\nexport default {\n  name: \"Category\",\n  //页面初始化数据\n  data: function data() {\n    return {\n      options: [],\n      searchText: \"\",\n      user: {},\n      //从icons.js中引入常量iconStore\n      iconStore: icons.iconStore,\n      icons: [],\n      icon: {},\n      addIcon: {},\n      pageNum: 1,\n      pageSize: 5,\n      entity: {},\n      total: 0,\n      dialogFormVisible: false,\n      addDialogFormVisible: false\n    };\n  },\n  //页面创建完成动作\n  created: function created() {\n    this.user = localStorage.getItem(\"user\") ? JSON.parse(sessionStorage.getItem(\"user\")) : {};\n    this.load();\n  },\n  //方法\n  methods: {\n    //加载页面\n    load: function load() {\n      var _this = this;\n\n      this.request.get(\"/api/icon\").then(function (res) {\n        _this.icons = res.data;\n      });\n    },\n    //编辑分类\n    handleEditCategory: function handleEditCategory(category) {\n      var _this2 = this;\n\n      this.$prompt(\"请输入修改后的名称\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\"\n      }).then(function (_ref) {\n        var value = _ref.value;\n        category.name = value;\n\n        _this2.request.post(\"/api/category\", category).then(function (res) {\n          if (res.code === \"200\") {\n            _this2.$message.success(\"修改成功\");\n          } else {\n            _this2.$message.error(\"修改失败\");\n          }\n        });\n      });\n    },\n    //添加分类\n    handleAddCategory: function handleAddCategory(icon) {\n      var _this3 = this;\n\n      this.$prompt(\"请输入新增的下级分类名称\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\"\n      }).then(function (_ref2) {\n        var value = _ref2.value;\n\n        _this3.request.post(\"/api/category/add\", {\n          name: value,\n          iconId: icon.id\n        }).then(function (res) {\n          if (res.code === \"200\") {\n            _this3.$message.success(\"新增成功\");\n\n            _this3.load();\n          } else {\n            _this3.$message.error(\"新增失败\");\n          }\n        });\n      });\n    },\n    //编辑图标弹窗\n    handleEditIcon: function handleEditIcon(icon) {\n      this.icon = JSON.parse(JSON.stringify(icon));\n      this.dialogFormVisible = true;\n    },\n    //编辑图标\n    editIcon: function editIcon() {\n      var _this4 = this;\n\n      //删除无用的属性\n      delete this.icon.categories;\n      this.request.post(\"/api/icon\", this.icon).then(function (res) {\n        if (res.code === \"200\") {\n          _this4.$message.success(\"修改成功\");\n\n          _this4.dialogFormVisible = false;\n        } else {\n          _this4.$message.error(\"修改失败\");\n        }\n      });\n    },\n    //保存图标\n    saveIcon: function saveIcon() {\n      var _this5 = this;\n\n      //新增上级分类\n      if (this.addIcon.value == undefined) {\n        this.$message.error(\"请选择上级分类图标\");\n        return;\n      }\n\n      this.request.post(\"/api/icon\", this.addIcon).then(function (res) {\n        if (res.code === \"200\") {\n          _this5.$message.success(\"新增成功\");\n\n          _this5.addDialogFormVisible = false;\n\n          _this5.load();\n        } else {\n          _this5.$message.error(\"新增失败\");\n        }\n      });\n    },\n    //删除图标\n    deleteIcon: function deleteIcon(iconId) {\n      var _this6 = this;\n\n      //删除上级分类\n      this.request.get(\"/api/icon/delete?id=\" + iconId).then(function (res) {\n        if (res.code == \"200\") {\n          _this6.$message.success(\"删除成功\");\n\n          _this6.load();\n        } else {\n          _this6.$message.error(res.msg);\n        }\n      });\n    },\n    //删除分类\n    deleteCategory: function deleteCategory(category) {\n      var _this7 = this;\n\n      //删除下级分类\n      this.request.get(\"/api/category/delete?id=\" + category.id).then(function (res) {\n        if (res.code == \"200\") {\n          _this7.$message.success(\"删除成功\");\n\n          _this7.load();\n        } else {\n          _this7.$message.error(res.msg);\n        }\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuJA;AACA;AACAA,kBADA;AAGA;AACAC,MAJA,kBAIA;AACA;AACAC,iBADA;AAEAC,oBAFA;AAGAC,cAHA;AAIA;AACAC,gCALA;AAMAC,eANA;AAOAC,cAPA;AAQAC,iBARA;AASAC,gBATA;AAUAC,iBAVA;AAWAC,gBAXA;AAYAC,cAZA;AAaAC,8BAbA;AAcAC;AAdA;AAgBA,GArBA;AAsBA;AACAC,SAvBA,qBAuBA;AACA,+CACAC,0CADA,GAEA,EAFA;AAGA;AACA,GA5BA;AA6BA;AACAC;AACA;AACAC,QAFA,kBAEA;AAAA;;AACA;AACA;AACA,OAFA;AAGA,KANA;AAOA;AACAC,sBARA,8BAQAC,QARA,EAQA;AAAA;;AACA;AACAC,+BADA;AAEAC;AAFA,SAGAC,IAHA,CAGA;AAAA;AACAH;;AACA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA,SANA;AAOA,OAZA;AAaA,KAtBA;AAuBA;AACAI,qBAxBA,6BAwBAjB,IAxBA,EAwBA;AAAA;;AACA;AACAc,+BADA;AAEAC;AAFA,SAGAC,IAHA,CAGA;AAAA;;AACA,uBACAE,IADA,CACA,mBADA,EACA;AAAAzB;AAAA0B;AAAA,SADA,EAEAH,IAFA,CAEA;AACA;AACA;;AACA;AACA,WAHA,MAGA;AACA;AACA;AACA,SATA;AAUA,OAdA;AAeA,KAxCA;AAyCA;AACAI,kBA1CA,0BA0CApB,IA1CA,EA0CA;AACA;AACA;AACA,KA7CA;AA8CA;AACAqB,YA/CA,sBA+CA;AAAA;;AACA;AACA;AACA;AACA;AACA;;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA,OAPA;AAQA,KA1DA;AA2DA;AACAC,YA5DA,sBA4DA;AAAA;;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;;AACA;;AACA;AACA,SAJA,MAIA;AACA;AACA;AACA,OARA;AASA,KA3EA;AA4EA;AACAC,cA7EA,sBA6EAJ,MA7EA,EA6EA;AAAA;;AACA;AACA;AACA;AACA;;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA,OAPA;AAQA,KAvFA;AAwFA;AACAK,kBAzFA,0BAyFAX,QAzFA,EAyFA;AAAA;;AACA;AACA;AACA;AACA;;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA,OAPA;AAQA;AAnGA;AA9BA","names":["name","data","options","searchText","user","iconStore","icons","icon","addIcon","pageNum","pageSize","entity","total","dialogFormVisible","addDialogFormVisible","created","JSON","methods","load","handleEditCategory","category","confirmButtonText","cancelButtonText","then","handleAddCategory","post","iconId","handleEditIcon","editIcon","saveIcon","deleteIcon","deleteCategory"],"sourceRoot":"src/views/manage/good","sources":["Category.vue"],"sourcesContent":["<!--\n * 后台商品分类管理\n *\n * @Author: ShanZhu\n * @Date: 2023-11-11\n-->\n<template>\n  <div>\n\n    <div style=\"width: 100%; margin: 0px auto\">\n\n      <!--新增按钮-->\n      <el-button @click=\"addDialogFormVisible = true\" round type=\"success\" style=\"margin: 10px;width: 150px\">\n        <i class=\"el-icon-circle-plus\"style=\"padding-right: 6px\"></i>新增\n      </el-button>\n\n      <el-table :data=\"icons\" stripe border fixed>\n        <!--下级分类表-->\n        <el-table-column type=\"expand\" label=\"下级分类\" width=\"100px\">\n\n          <template slot-scope=\"scope\">\n\n            <el-table\n              :data=\"scope.row.categories\"\n              :header-cell-style=\"{ background: '#cbefea', color: 'black' }\"\n            >\n\n              <el-table-column label=\"分类id\" prop=\"id\"></el-table-column>\n              <el-table-column label=\"分类名称\" prop=\"name\"></el-table-column>\n\n              <el-table-column label=\"操作\">\n                <template slot-scope=\"scope\">\n                  <el-button\n                    type=\"primary\"\n                    size=\"mini\"\n                    @click=\"handleEditCategory(scope.row)\"\n                    >修改</el-button\n                  >\n\n                  <el-popconfirm\n                    @confirm=\"deleteCategory(scope.row)\"\n                    title=\"确定删除？\"\n                  >\n                    <el-button\n                      type=\"danger\"\n                      size=\"mini\"\n                      slot=\"reference\"\n                      >删除</el-button\n                    >\n                  </el-popconfirm>\n                </template>\n              </el-table-column>\n\n            </el-table>\n          </template>\n        </el-table-column>\n\n        <el-table-column label=\"id\" prop=\"id\" width=\"60px\"></el-table-column>\n        <el-table-column label=\"icon\">\n          <template slot-scope=\"scope\">\n            <i class=\"iconfont\" v-html=\"scope.row.value\"></i>\n          </template>\n        </el-table-column>\n\n        <el-table-column fixed=\"right\" label=\"操作\" width=\"200\">\n          <template slot-scope=\"scope\">\n            <el-button\n              type=\"primary\"\n              icon=\"el-icon-edit\"\n              circle\n              @click=\"handleEditIcon(scope.row)\"\n            ></el-button>\n            <el-button\n              type=\"success\"\n              icon=\"el-icon-plus\"\n              circle\n              @click=\"handleAddCategory(scope.row)\"\n            ></el-button>\n\n            <el-popconfirm\n              @confirm=\"deleteIcon(scope.row.id)\"\n              title=\"确定删除？\"\n            >\n              <el-button\n                type=\"danger\"\n                icon=\"el-icon-delete\"\n                circle\n                slot=\"reference\"\n                style=\"margin-left: 10px\"\n              ></el-button>\n            </el-popconfirm>\n          </template>\n        </el-table-column>\n\n      </el-table>\n\n    </div>\n\n    <!--icon修改弹窗-->\n    <el-dialog title=\"修改上级分类\" :visible.sync=\"dialogFormVisible\">\n\n      <el-form :model=\"icon\">\n        <el-form-item label=\"图标\" label-width=\"100px\">\n          <i class=\"iconfont\" v-html=\"icon.value\"></i>\n        </el-form-item>\n\n        <el-form-item label=\"更改图标\" label-width=\"100px\">\n          <el-select placeholder=\"请选择图标\" v-model=\"icon.value\">\n            <el-option v-for=\"item in iconStore\" :value=\"item\" :key=\"item\">\n              <i class=\"iconfont\" v-html=\"item\"></i>\n            </el-option>\n          </el-select>\n        </el-form-item>\n\n      </el-form>\n\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"editIcon\">确 定</el-button>\n      </div>\n\n    </el-dialog>\n\n    <el-dialog title=\"新增上级分类\" :visible.sync=\"addDialogFormVisible\">\n\n     <el-form :model=\"addIcon\">\n        <el-form-item label=\"图标\" label-width=\"100px\">\n          <i class=\"iconfont\" v-html=\"addIcon.value\"></i>\n        </el-form-item>\n\n        <el-form-item label=\"更改图标\" label-width=\"100px\">\n          <el-select placeholder=\"请选择图标\" v-model=\"addIcon.value\">\n            <el-option v-for=\"item in iconStore\" :value=\"item\" :key=\"item\">\n              <i class=\"iconfont\" v-html=\"item\"></i>\n            </el-option>\n          </el-select>\n        </el-form-item>\n\n      </el-form>\n\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"addDialogFormVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"saveIcon\">确 定</el-button>\n      </div>\n\n    </el-dialog>\n\n  </div>\n</template>\n\n<script>\nimport icons from \"@/utils/icons\";\nexport default {\n  name: \"Category\",\n\n  //页面初始化数据\n  data() {\n    return {\n      options: [],\n      searchText: \"\",\n      user: {},\n      //从icons.js中引入常量iconStore\n      iconStore: icons.iconStore,\n      icons: [],\n      icon: {},\n      addIcon: {},\n      pageNum: 1,\n      pageSize: 5,\n      entity: {},\n      total: 0,\n      dialogFormVisible: false,\n      addDialogFormVisible: false,\n    };\n  },\n  //页面创建完成动作\n  created() {\n    this.user = localStorage.getItem(\"user\")\n      ? JSON.parse(sessionStorage.getItem(\"user\"))\n      : {};\n    this.load();\n  },\n  //方法\n  methods: {\n    //加载页面\n    load() {\n      this.request.get(\"/api/icon\").then((res) => {\n        this.icons = res.data;\n      });\n    },\n    //编辑分类\n    handleEditCategory(category) {\n      this.$prompt(\"请输入修改后的名称\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n      }).then(({ value }) => {\n        category.name = value;\n        this.request.post(\"/api/category\", category).then((res) => {\n          if (res.code === \"200\") {\n            this.$message.success(\"修改成功\");\n          } else {\n            this.$message.error(\"修改失败\");\n          }\n        });\n      });\n    },\n    //添加分类\n    handleAddCategory(icon) {\n      this.$prompt(\"请输入新增的下级分类名称\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n      }).then(({ value }) => {\n        this.request\n          .post(\"/api/category/add\", { name: value, iconId: icon.id })\n          .then((res) => {\n            if (res.code === \"200\") {\n              this.$message.success(\"新增成功\");\n              this.load();\n            } else {\n              this.$message.error(\"新增失败\");\n            }\n          });\n      });\n    },\n    //编辑图标弹窗\n    handleEditIcon(icon) {\n      this.icon = JSON.parse(JSON.stringify(icon));\n      this.dialogFormVisible = true;\n    },\n    //编辑图标\n    editIcon() {\n      //删除无用的属性\n      delete this.icon.categories;\n      this.request.post(\"/api/icon\", this.icon).then((res) => {\n        if (res.code === \"200\") {\n          this.$message.success(\"修改成功\");\n          this.dialogFormVisible = false;\n        } else {\n          this.$message.error(\"修改失败\");\n        }\n      });\n    },\n    //保存图标\n    saveIcon() {\n      //新增上级分类\n      if (this.addIcon.value == undefined) {\n        this.$message.error(\"请选择上级分类图标\");\n        return;\n      }\n      this.request.post(\"/api/icon\", this.addIcon).then((res) => {\n        if (res.code === \"200\") {\n          this.$message.success(\"新增成功\");\n          this.addDialogFormVisible = false;\n          this.load();\n        } else {\n          this.$message.error(\"新增失败\");\n        }\n      });\n    },\n    //删除图标\n    deleteIcon(iconId) {\n      //删除上级分类\n      this.request.get(\"/api/icon/delete?id=\" + iconId).then((res) => {\n        if (res.code == \"200\") {\n          this.$message.success(\"删除成功\");\n          this.load();\n        } else {\n          this.$message.error(res.msg);\n        }\n      });\n    },\n    //删除分类\n    deleteCategory(category) {\n      //删除下级分类\n      this.request.get(\"/api/category/delete?id=\" + category.id).then((res) => {\n        if (res.code == \"200\") {\n          this.$message.success(\"删除成功\");\n          this.load();\n        } else {\n          this.$message.error(res.msg);\n        }\n      });\n    },\n  },\n};\n\n</script>\n\n<style scoped>\n@import \"../../../resource/css/icon.css\";\n</style>\n"]},"metadata":{},"sourceType":"module"}