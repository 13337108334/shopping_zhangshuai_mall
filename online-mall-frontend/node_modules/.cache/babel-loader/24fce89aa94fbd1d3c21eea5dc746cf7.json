{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport API from '../../utils/request';\nvar url = \"/api/order/\";\nexport default {\n  name: \"Order\",\n  //页面初始化数据\n  data: function data() {\n    return {\n      options: [],\n      searchMode: '',\n      searchText: '',\n      user: {},\n      tableData: [],\n      pageNum: 1,\n      pageSize: 8,\n      entity: {},\n      total: 0,\n      dialogFormVisible: false,\n      detail: [],\n      baseApi: this.$store.state.baseApi\n    };\n  },\n  //页面加载完成\n  created: function created() {\n    this.load();\n  },\n  methods: {\n    handleSizeChange: function handleSizeChange(pageSize) {\n      this.pageSize = pageSize;\n      this.load();\n    },\n    handleCurrentChange: function handleCurrentChange(pageNum) {\n      this.pageNum = pageNum;\n      this.load();\n    },\n    //重置搜索\n    reset: function reset() {\n      this.searchMode = '';\n      this.searchText = '';\n      this.load();\n    },\n    //页面加载\n    load: function load() {\n      var _this = this;\n\n      API.get(url + \"/page\", {\n        params: {\n          pageNum: this.pageNum,\n          pageSize: this.pageSize,\n          orderNo: this.searchText,\n          state: this.searchMode\n        }\n      }).then(function (res) {\n        _this.tableData = res.data.records || [];\n        _this.total = res.data.total;\n      });\n    },\n    //展示详情弹出\n    showDetail: function showDetail(row) {\n      var _this2 = this;\n\n      this.request.get(\"/api/order/orderNo/\" + row.orderNo).then(function (res) {\n        if (res.code === '200') {\n          _this2.detail = [];\n\n          _this2.detail.push(res.data);\n\n          _this2.dialogFormVisible = true;\n        }\n      });\n    },\n    //订单发货\n    delivery: function delivery(order) {\n      var _this3 = this;\n\n      this.request.get(\"/api/order/delivery/\" + order.orderNo).then(function (res) {\n        if (res.code === '200') {\n          _this3.$message.success(\"成功发货\");\n\n          order.state = '已发货';\n        }\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2GA;AACA;AAEA;AACAA,eADA;AAEA;AACAC,MAHA,kBAGA;AACA;AACAC,iBADA;AAEAC,oBAFA;AAGAC,oBAHA;AAIAC,cAJA;AAKAC,mBALA;AAMAC,gBANA;AAOAC,iBAPA;AAQAC,gBARA;AASAC,cATA;AAUAC,8BAVA;AAWAC,gBAXA;AAYAC;AAZA;AAcA,GAlBA;AAmBA;AACAC,SApBA,qBAoBA;AACA;AACA,GAtBA;AAuBAC;AACAC,oBADA,4BACAR,QADA,EACA;AACA;AACA;AACA,KAJA;AAKAS,uBALA,+BAKAV,OALA,EAKA;AACA;AACA;AACA,KARA;AASA;AACAW,SAVA,mBAUA;AACA;AACA;AACA;AACA,KAdA;AAeA;AACAC,QAhBA,kBAgBA;AAAA;;AACAC;AACAC;AACAd,+BADA;AAEAC,iCAFA;AAGAc,kCAHA;AAIAC;AAJA;AADA,SAOAC,IAPA,CAOA;AACA;AACA;AACA,OAVA;AAWA,KA5BA;AA6BA;AACAC,cA9BA,sBA8BAC,GA9BA,EA8BA;AAAA;;AACA;AACA;AACA;;AACA;;AACA;AACA;AACA,OANA;AAOA,KAtCA;AAuCA;AACAC,YAxCA,oBAwCAC,KAxCA,EAwCA;AAAA;;AACA;AACA;AACA;;AACAA;AACA;AACA,OALA;AAMA;AA/CA;AAvBA","names":["name","data","options","searchMode","searchText","user","tableData","pageNum","pageSize","entity","total","dialogFormVisible","detail","baseApi","created","methods","handleSizeChange","handleCurrentChange","reset","load","API","params","orderNo","state","then","showDetail","row","delivery","order"],"sourceRoot":"src/views/manage","sources":["Order.vue"],"sourcesContent":["<!--\n * 后台订单管理页面\n *\n * @ZhangShuai: ShanZhu\n * @Date: 2023-11-11\n-->\n<template>\n  <div>\n    <div>\n\n      <el-select v-model=\"searchMode\" placeholder=\"请选择订单类型\" style=\"width: 150px;margin-right: 10px\">\n        <el-option value=\"已支付\" label=\"已支付\"></el-option>\n        <el-option value=\"已发货\" label=\"已发货\"></el-option>\n        <el-option value=\"已收货\" label=\"已收货\"></el-option>\n      </el-select>\n\n      <el-input v-model=\"searchText\" @keyup.enter.native=\"load\" style=\"width: 200px\">\n        <i slot=\"prefix\" class=\"el-input__icon el-icon-search\"></i></el-input>\n      <el-button @click=\"load\" type=\"primary\" style=\"margin: 10px\">搜索</el-button>\n      <el-button @click=\"reset\" type=\"info\" style=\"margin: 10px\">重置</el-button>\n\n    </div>\n\n    <el-table :data=\"tableData\" border stripe fixed style=\"width: 100%\">\n      <el-table-column prop=\"id\" label=\"ID\" width=\"50\" sortable> </el-table-column>\n      <el-table-column prop=\"orderNo\" label=\"订单编号\" width=\"200\"></el-table-column>\n      <el-table-column prop=\"totalPrice\" label=\"总价\" width=\"100\"></el-table-column>\n      <el-table-column prop=\"userId\" label=\"下单人id\" width=\"100\"></el-table-column>\n      <el-table-column prop=\"linkUser\" label=\"联系人\" width=\"150\"></el-table-column>\n      <el-table-column prop=\"linkPhone\" label=\"联系电话\"></el-table-column>\n      <el-table-column prop=\"linkAddress\" label=\"送货地址\" width=\"300\"></el-table-column>\n\n      <el-table-column prop=\"state\" label=\"状态\" width=\"100\">\n        <template slot-scope=\"scope\">\n          <el-tag type=\"success\" v-if=\"scope.row.state==='已支付'\">{{scope.row.state}}</el-tag>\n          <el-tag type=\"primary\" v-if=\"scope.row.state==='已发货'\">{{scope.row.state}}</el-tag>\n          <el-tag type=\"info\" v-if=\"scope.row.state==='已收货'\">{{scope.row.state}}</el-tag>\n        </template>\n      </el-table-column>\n\n      <el-table-column prop=\"createTime\" label=\"下单时间\"></el-table-column>\n\n      <el-table-column\n          fixed=\"right\"\n          label=\"操作\"\n          width=\"200\">\n        <template slot-scope=\"scope\">\n          <el-button type=\"primary\" size=\"mini\"  @click=\"showDetail(scope.row)\">详情</el-button>\n          <el-popconfirm\n              @confirm=\"delivery(scope.row)\"\n              title=\"确定发货吗？\"\n              v-if=\"scope.row.state==='已支付'\"\n          >\n            <el-button type=\"primary\" size=\"mini\" slot=\"reference\" style=\"margin-left: 10px\">发货</el-button>\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n\n    </el-table>\n\n    <!--分页控件-->\n    <div style=\"margin-top: 10px\">\n      <el-pagination\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page=\"pageNum\"\n        :page-size=\"pageSize\"\n        :page-sizes=\"[3, 5, 8, 10]\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"total\"\n      >\n      </el-pagination>\n    </div>\n\n    <!--订单详情弹窗-->\n    <el-dialog :visible.sync=\"dialogFormVisible\">\n      <el-table :data=\"detail\" background-color=\"black\" >\n        <el-table-column  label=\"图片\" width=\"150\" >\n          <template   slot-scope=\"scope\">\n            <img :src=\"baseApi + scope.row.img\"  min-width=\"100\" height=\"100\" />\n          </template>\n        </el-table-column>\n\n        <el-table-column prop=\"goodId\" label=\"商品id\"  ></el-table-column>\n        <el-table-column prop=\"goodName\" label=\"商品名称\"  ></el-table-column>\n        <el-table-column prop=\"standard\" label=\"商品规格\"  ></el-table-column>\n        <el-table-column prop=\"price\" label=\"单价\"  ></el-table-column>\n        <el-table-column prop=\"discount\" label=\"折扣\"></el-table-column>\n\n        <el-table-column label=\"实价\" >\n          <template slot-scope=\"scope\">\n            {{scope.row.price * scope.row.discount}}\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"count\" label=\"数量\" ></el-table-column>\n        <el-table-column label=\"总价\" >\n          <template slot-scope=\"scope\">\n            {{scope.row.price * scope.row.discount * scope.row.count }}\n          </template>\n        </el-table-column>\n\n      </el-table>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport API from '../../utils/request'\nconst url = \"/api/order/\"\n\nexport default {\n  name: \"Order\",\n  //页面初始化数据\n  data() {\n    return {\n      options: [],\n      searchMode: '',\n      searchText: '',\n      user: {},\n      tableData: [],\n      pageNum: 1,\n      pageSize: 8,\n      entity: {},\n      total: 0,\n      dialogFormVisible: false,\n      detail:[],\n      baseApi: this.$store.state.baseApi,\n    };\n  },\n  //页面加载完成\n  created() {\n    this.load()\n  },\n  methods: {\n    handleSizeChange(pageSize) {\n      this.pageSize = pageSize\n      this.load()\n    },\n    handleCurrentChange(pageNum) {\n      this.pageNum = pageNum\n      this.load()\n    },\n    //重置搜索\n    reset(){\n      this.searchMode = '';\n      this.searchText = '';\n      this.load()\n    },\n    //页面加载\n    load() {\n       API.get(url + \"/page\", {\n          params: {\n            pageNum: this.pageNum,\n            pageSize: this.pageSize,\n            orderNo: this.searchText,\n            state: this.searchMode\n          }\n       }).then(res => {\n          this.tableData = res.data.records || []\n          this.total = res.data.total\n       })\n    },\n    //展示详情弹出\n    showDetail(row){\n        this.request.get(\"/api/order/orderNo/\"+row.orderNo).then(res=>{\n          if(res.code==='200'){\n            this.detail=[];\n            this.detail.push(res.data);\n            this.dialogFormVisible = true;\n          }\n        })\n    },\n    //订单发货\n    delivery(order){\n        this.request.get(\"/api/order/delivery/\"+order.orderNo).then(res=>{\n          if(res.code==='200'){\n            this.$message.success(\"成功发货\");\n            order.state = '已发货'\n          }\n        })\n    },\n\n  },\n};\n</script>\n\n"]},"metadata":{},"sourceType":"module"}