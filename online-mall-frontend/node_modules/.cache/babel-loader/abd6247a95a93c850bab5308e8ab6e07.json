{"ast":null,"code":"import \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.array.map.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"User\",\n\n  /*页面创建完成动作*/\n  created: function created() {\n    this.load();\n  },\n\n  /*初始化数据*/\n  data: function data() {\n    return {\n      tableData: [],\n      roleOptions: [{\n        value: 'admin',\n        label: '管理员'\n      }, {\n        value: 'user',\n        label: '用户'\n      }],\n      roleValue: '',\n      total: 0,\n      pageSize: 5,\n      currentPage: 1,\n      searchMode: 'id',\n      searchParams: {\n        id: '',\n        username: '',\n        nickname: ''\n      },\n      dialogFormVisible: false,\n      dialogTitle: '',\n      user: {},\n      multipleSelection: []\n    };\n  },\n\n  /*方法*/\n  methods: {\n    handleSizeChange: function handleSizeChange(pageSize) {\n      this.pageSize = pageSize;\n      this.load();\n    },\n\n    /*分页跳转*/\n    handleCurrentPage: function handleCurrentPage(currentPage) {\n      this.currentPage = currentPage;\n      this.load();\n    },\n\n    /*筛选*/\n    handleSelectionChange: function handleSelectionChange(val) {\n      this.multipleSelection = val;\n    },\n\n    /*加载数据*/\n    load: function load() {\n      var _this = this;\n\n      this.request.get(\"/user/page\", {\n        params: {\n          pageNum: this.currentPage,\n          pageSize: this.pageSize,\n          id: this.searchParams.id,\n          username: this.searchParams.username,\n          nickname: this.searchParams.nickname\n        }\n      }).then(function (res) {\n        if (res.code === '200') {\n          _this.tableData = res.data.records;\n          _this.total = res.data.total;\n        }\n      });\n    },\n\n    /*搜索*/\n    search: function search() {\n      this.currentPage = 1;\n      this.load();\n    },\n\n    /*重新加载*/\n    reload: function reload() {\n      this.searchParams.id = '';\n      this.searchParams.username = '';\n      this.searchParams.nickname = '';\n      this.load();\n    },\n\n    /*新增用户*/\n    save: function save() {\n      var _this2 = this;\n\n      this.dialogTitle = '新增用户';\n      this.request.post(\"/user\", this.user).then(function (res) {\n        if (res.code === '200') {\n          _this2.$message.success(\"保存成功\");\n\n          _this2.dialogFormVisible = false;\n\n          _this2.load();\n        } else {\n          _this2.$message.error(res.msg);\n        }\n      });\n    },\n\n    /*新增用户弹窗*/\n    handleAdd: function handleAdd() {\n      this.dialogTitle = '新增用户';\n      this.dialogFormVisible = true;\n      this.user = {};\n    },\n\n    /*编辑用户*/\n    handleEdit: function handleEdit(row) {\n      this.user = JSON.parse(JSON.stringify(row));\n      this.dialogTitle = '编辑用户';\n      this.dialogFormVisible = true;\n    },\n\n    /*删除用户*/\n    handleDelete: function handleDelete(id) {\n      var _this3 = this;\n\n      this.$confirm('确认删除该用户吗?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        _this3.request.delete(\"/user/\" + id).then(function (res) {\n          if (res.code === '200') {\n            _this3.$message({\n              type: \"success\",\n              message: \"删除成功\"\n            });\n\n            _this3.load();\n          } else {\n            _this3.$message.error(res.msg);\n          }\n        });\n      });\n    },\n\n    /*批量删除*/\n    delBatch: function delBatch() {\n      var _this4 = this;\n\n      var ids = this.multipleSelection.map(function (v) {\n        return v.id;\n      });\n      this.$confirm('确认删除这些用户吗?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        _this4.request.post(\"/user/del/batch\", ids).then(function (res) {\n          if (res.code === '200') {\n            _this4.$message({\n              type: \"success\",\n              message: \"删除成功\",\n              duration: 3000\n            });\n\n            _this4.load();\n          } else {\n            _this4.$message.error(res.msg);\n          }\n        });\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuHA;AACAA,cADA;;AAEA;AACAC,SAHA,qBAGA;AACA;AACA,GALA;;AAMA;AACAC,MAPA,kBAOA;AACA;AACAC,mBADA;AAEAC;AACAC,sBADA;AAEAC;AAFA,SAGA;AACAD,qBADA;AAEAC;AAFA,OAHA,CAFA;AAUAC,mBAVA;AAWAC,cAXA;AAYAC,iBAZA;AAaAC,oBAbA;AAcAC,sBAdA;AAeAC;AACAC,cADA;AAEAC,oBAFA;AAGAC;AAHA,OAfA;AAoBAC,8BApBA;AAqBAC,qBArBA;AAsBAC,cAtBA;AAuBAC;AAvBA;AAyBA,GAjCA;;AAkCA;AACAC;AACAC,oBADA,4BACAZ,QADA,EACA;AACA;AACA;AACA,KAJA;;AAKA;AACAa,qBANA,6BAMAZ,WANA,EAMA;AACA;AACA;AACA,KATA;;AAUA;AACAa,yBAXA,iCAWAC,GAXA,EAWA;AACA;AACA,KAbA;;AAcA;AACAC,QAfA,kBAeA;AAAA;;AACA;AACAC;AACAC,mCADA;AAEAlB,iCAFA;AAGAI,kCAHA;AAIAC,8CAJA;AAKAC;AALA;AADA,SAQAa,IARA,CAQA;AACA;AACA;AACA;AACA;AACA,OAbA;AAeA,KA/BA;;AAgCA;AACAC,UAjCA,oBAiCA;AACA;AACA;AACA,KApCA;;AAqCA;AACAC,UAtCA,oBAsCA;AACA;AACA;AACA;AACA;AACA,KA3CA;;AA4CA;AACAC,QA7CA,kBA6CA;AAAA;;AACA;AACA;AACA;AACA;;AACA;;AACA;AACA,SAJA,MAIA;AACA;AACA;AACA,OARA;AASA,KAxDA;;AAyDA;AACAC,aA1DA,uBA0DA;AACA;AACA;AACA;AAEA,KA/DA;;AAgEA;AACAC,cAjEA,sBAiEAC,GAjEA,EAiEA;AACA;AACA;AACA;AACA,KArEA;;AAsEA;AACAC,gBAvEA,wBAuEAtB,EAvEA,EAuEA;AAAA;;AACA;AACAuB,+BADA;AAEAC,8BAFA;AAGAC;AAHA,SAIAV,IAJA,CAIA;AACA;AACA;AACA;AACAU,6BADA;AAEAC;AAFA;;AAIA;AACA,WANA,MAMA;AACA;AACA;AACA,SAVA;AAWA,OAhBA;AAiBA,KAzFA;;AA0FA;AACAC,YA3FA,sBA2FA;AAAA;;AACA;AAAA;AAAA;AACA;AACAJ,+BADA;AAEAC,8BAFA;AAGAC;AAHA,SAIAV,IAJA,CAIA;AACA;AACA;AACA;AACAU,6BADA;AAEAC,6BAFA;AAGAE;AAHA;;AAKA;AACA,WAPA,MAOA;AACA;AACA;AACA,SAXA;AAYA,OAjBA;AAkBA;AA/GA;AAnCA","names":["name","created","data","tableData","roleOptions","value","label","roleValue","total","pageSize","currentPage","searchMode","searchParams","id","username","nickname","dialogFormVisible","dialogTitle","user","multipleSelection","methods","handleSizeChange","handleCurrentPage","handleSelectionChange","val","load","params","pageNum","then","search","reload","save","handleAdd","handleEdit","row","handleDelete","confirmButtonText","cancelButtonText","type","message","delBatch","duration"],"sourceRoot":"src/views/manage","sources":["User.vue"],"sourcesContent":["<!--\n * 用户管理页面\n *\n<<<<<<< HEAD\n * @author: ZhangDaYe\n=======\n * @Author: ShanZhu\n>>>>>>> origin/feature_2024_08_24\n * @Date: 2023-11-11\n-->\n<template>\n<div>\n\n  <!--搜索下拉框-->\n  <div class=\"demo-input-size\">\n    <el-select v-model=\"searchMode\" placeholder=\"请选择\" style=\"width: 150px;margin-right: 10px\">\n      <el-option value=\"id\" label=\"用户id\"></el-option>\n      <el-option value=\"username\" label=\"账号\"></el-option>\n      <el-option value=\"nickname\" label=\"昵称\"></el-option>\n    </el-select>\n    <el-input v-if=\"searchMode==='id'\" placeholder=\"请输入用户id\" prefix-icon=\"el-icon-search\" style=\"width: 250px;padding-right: 5px\" v-model=\"searchParams.id\"></el-input>\n    <el-input v-if=\"searchMode==='nickname'\" placeholder=\"请输入昵称\" prefix-icon=\"el-icon-search\" style=\"width: 250px;padding-right: 5px\" v-model=\"searchParams.nickname\"></el-input>\n    <el-button round type=\"primary\" @click=\"search\">搜索</el-button>\n    <el-button round type=\"info\" @click=\"reload\">重置</el-button>\n  </div>\n\n  <!--按钮栏-->\n  <div style=\"padding-top: 10px\">\n    <el-button style=\"margin: 5px;width: 100px\" round type=\"success\" @click=\"handleAdd\"><i class=\"el-icon-circle-plus\"style=\"padding-right: 6px\"></i>新增</el-button>\n    <el-button style=\"margin: 5px;width: 120px\" round type=\"danger\" @click=\"delBatch\"><i class=\"el-icon-remove\" style=\"padding-right: 6px\"></i>批量删除</el-button>\n  </div>\n\n  <!--新增用户弹窗-->\n  <el-dialog :title=\"dialogTitle\" :visible.sync=\"dialogFormVisible\">\n    <el-form label-width=\"50px\" style=\"padding: 0 60px\">\n      <el-form-item label=\"昵称\">\n        <el-input v-model=\"user.nickname\" autocomplete=\"off\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"身份\">\n        <el-select v-model=\"user.role\" placeholder=\"请选择\">\n          <el-option\n              v-for=\"item in roleOptions\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\">\n          </el-option>\n        </el-select>\n      </el-form-item>\n\n      <el-form-item label=\"电话\">\n        <el-input v-model=\"user.phone\" autocomplete=\"off\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"邮箱\">\n        <el-input v-model=\"user.email\" autocomplete=\"off\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"地址\">\n        <el-input v-model=\"user.address\" autocomplete=\"off\"></el-input>\n      </el-form-item>\n\n    </el-form>\n\n    <div slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n      <el-button type=\"primary\" @click=\"save\">确 定</el-button>\n    </div>\n\n  </el-dialog>\n\n  <!--用户表格列表-->\n  <el-table stripe border fixed size=\"medium\" :data=\"tableData\" background-color=\"black\" @selection-change=\"handleSelectionChange\">\n    <el-table-column type=\"selection\" ></el-table-column>\n      <el-table-column prop=\"id\" label=\"id\" width=\"50\" ></el-table-column>\n    <el-table-column prop=\"username\" label=\"账号\" width=\"100\" ></el-table-column>\n\n    <el-table-column label=\"身份\" width=\"100\" >\n      <template slot-scope=\"scope\">\n        <span v-if=\"scope.row.role==='user'\">用户</span>\n        <span v-if=\"scope.row.role==='admin'\">管理员</span>\n      </template>\n    </el-table-column>\n\n    <el-table-column prop=\"nickname\" label=\"昵称\" width=\"100\" ></el-table-column>\n    <el-table-column prop=\"phone\" label=\"电话\" width=\"180\" ></el-table-column>\n    <el-table-column prop=\"email\" label=\"邮箱\" width=\"180\" ></el-table-column>\n    <el-table-column prop=\"address\" label=\"地址\" width=\"200\" ></el-table-column>\n\n    <el-table-column label=\"操作\">\n      <template slot-scope=\"scope\">\n        <el-button\n            size=\"mini\"\n            type=\"success\"\n            @click=\"handleEdit(scope.row)\">编辑</el-button>\n        <el-button\n            size=\"mini\"\n            type=\"danger\"\n            @click=\"handleDelete(scope.row.id)\">删除</el-button>\n      </template>\n    </el-table-column>\n\n  </el-table>\n\n  <!--分页控件-->\n  <div class=\"block\" style=\"flex: 0 0 auto\">\n    <el-pagination\n        :current-page=\"currentPage\"\n        :page-sizes=\"[3, 5, 8, 10]\"\n        :page-size=\"pageSize\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"total\"\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentPage\"\n    >\n    </el-pagination>\n  </div>\n\n</div>\n</template>\n\n<script>\nexport default {\n  name: \"User\",\n  /*页面创建完成动作*/\n  created() {\n    this.load();\n  },\n  /*初始化数据*/\n  data(){\n    return{\n      tableData: [],\n      roleOptions: [{\n        value: 'admin',\n        label: '管理员'\n      }, {\n        value: 'user',\n        label: '用户'\n      },\n      ],\n      roleValue: '',\n      total: 0,\n      pageSize: 5,\n      currentPage: 1,\n      searchMode: 'id',\n      searchParams:{\n        id: '',\n        username: '',\n        nickname: ''\n      },\n      dialogFormVisible: false,\n      dialogTitle: '',\n      user: {},\n      multipleSelection: []\n    }\n  },\n  /*方法*/\n  methods:{\n    handleSizeChange(pageSize){\n      this.pageSize = pageSize;\n      this.load();\n    },\n    /*分页跳转*/\n    handleCurrentPage(currentPage){\n      this.currentPage = currentPage;\n      this.load();\n    },\n    /*筛选*/\n    handleSelectionChange(val){\n      this.multipleSelection = val\n    },\n    /*加载数据*/\n    load(){\n      this.request.get(\"/user/page\",{\n        params:{\n          pageNum: this.currentPage,\n          pageSize: this.pageSize,\n          id: this.searchParams.id,\n          username: this.searchParams.username,\n          nickname: this.searchParams.nickname\n        }\n      }).then(res=>{\n            if(res.code==='200'){\n              this.tableData = res.data.records;\n              this.total = res.data.total;\n            }\n          }\n      )\n    },\n    /*搜索*/\n    search(){\n      this.currentPage = 1;\n      this.load();\n    },\n    /*重新加载*/\n    reload(){\n      this.searchParams.id='';\n      this.searchParams.username='';\n      this.searchParams.nickname='';\n      this.load()\n    },\n    /*新增用户*/\n    save(){\n      this.dialogTitle='新增用户'\n      this.request.post(\"/user\",this.user).then(res=>{\n        if(res.code==='200'){\n          this.$message.success(\"保存成功\");\n          this.dialogFormVisible = false;\n          this.load();\n        }else{\n          this.$message.error(res.msg)\n        }\n      })\n    },\n    /*新增用户弹窗*/\n    handleAdd(){\n      this.dialogTitle='新增用户'\n      this.dialogFormVisible = true;\n      this.user = {};\n\n    },\n    /*编辑用户*/\n    handleEdit(row){\n      this.user = JSON.parse(JSON.stringify(row));\n      this.dialogTitle='编辑用户';\n      this.dialogFormVisible = true;\n    },\n    /*删除用户*/\n    handleDelete(id){\n      this.$confirm('确认删除该用户吗?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.request.delete(\"/user/\"+id).then(res=>{\n          if(res.code==='200'){\n            this.$message({\n              type: \"success\",\n              message: \"删除成功\",\n            });\n            this.load();\n          }else {\n            this.$message.error(res.msg);\n          }\n        })\n      })\n    },\n    /*批量删除*/\n    delBatch(){\n      let ids = this.multipleSelection.map(v => v.id);\n      this.$confirm('确认删除这些用户吗?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.request.post(\"/user/del/batch\",ids).then(res=>{\n          if(res.code==='200'){\n            this.$message({\n              type: \"success\",\n              message: \"删除成功\",\n              duration: 3000\n            });\n            this.load();\n          }else {\n            this.$message.error(res.msg);\n          }\n        })\n      })\n    }\n  }\n}\n</script>\n"]},"metadata":{},"sourceType":"module"}