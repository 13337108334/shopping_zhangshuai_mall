{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Navagation from \"@/components/Navagation\";\nimport request from \"@/utils/request\";\nexport default {\n  name: \"Front\",\n  data: function data() {\n    return {\n      user: {},\n      role: 'user',\n      loginStatus: false\n    };\n  },\n  methods: {\n    getUser: function getUser() {\n      var _this = this;\n\n      var username = localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")).username : \"\";\n\n      if (username) {\n        // 从后台获取User数据\n        this.request.get(\"/userinfo/\" + username).then(function (res) {\n          // 重新赋值后台的最新User数据\n          _this.user = res.data;\n        });\n      }\n    }\n  },\n  components: {\n    Navagation: Navagation\n  },\n  created: function created() {\n    var _this2 = this;\n\n    if (localStorage.getItem(\"user\")) {\n      request.post(\"http://localhost:8888/role\").then(function (res) {\n        if (res.code === '200') {\n          _this2.role = res.data;\n\n          if (localStorage.getItem(\"user\")) {\n            _this2.user = JSON.parse(localStorage.getItem(\"user\"));\n            _this2.loginStatus = true;\n          }\n        } else {\n          _this2.user = {\n            nickname: '您未登录',\n            avatarUrl: null\n          };\n          localStorage.removeItem('user');\n          _this2.loginStatus = false;\n        }\n      });\n    } else {\n      this.user = {\n        nickname: '您未登录',\n        avatarUrl: null\n      };\n      this.loginStatus = false;\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;AAEA;AACAA,eADA;AAEAC,MAFA,kBAEA;AACA;AACAC,cADA;AAEAC,kBAFA;AAGAC;AAHA;AAKA,GARA;AASAC;AACAC,WADA,qBACA;AAAA;;AACA;;AACA;AACA;AACA;AACA;AACA;AACA,SAHA;AAIA;AAEA;AAXA,GATA;AAuBAC;AACAC;AADA,GAvBA;AA0BAC,SA1BA,qBA0BA;AAAA;;AACA;AACAC;AACA;AACA;;AACA;AACA;AACA;AACA;AACA,SANA,MAMA;AACA;AAAAC;AAAAC;AAAA;AACAC;AACA;AACA;AACA,OAZA;AAaA,KAdA,MAcA;AACA;AAAAF;AAAAC;AAAA;AACA;AACA;AAEA;AA9CA","names":["name","data","user","role","loginStatus","methods","getUser","components","Navagation","created","request","nickname","avatarUrl","localStorage"],"sourceRoot":"src/views/front","sources":["Front.vue"],"sourcesContent":["<!--\n * 前台首页\n *\n * @author: ZhangDaYe\n * @Date: 2023-11-11\n-->\n<template>\n  <el-container style=\"height: 100%;width:100%;\">\n\n    <el-header style=\"background-color: white\">\n      <Navagation :user=\"user\"\n                  :role=\"role\"\n                  :login-status=\"loginStatus\"\n      ></Navagation>\n    </el-header>\n\n    <el-main style=\"background-color: #3186cb;width:100%;\">\n      <router-view />\n    </el-main>\n\n  </el-container>\n</template>\n\n<script>\n\nimport Navagation from \"@/components/Navagation\";\nimport request from \"@/utils/request\";\n\nexport default {\n  name: \"Front\",\n  data(){\n    return{\n      user:{},\n      role: 'user',\n      loginStatus: false,\n    }\n  },\n  methods: {\n    getUser() {\n      let username = localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")).username : \"\"\n      if (username) {\n        // 从后台获取User数据\n        this.request.get(\"/userinfo/\" + username).then(res => {\n          // 重新赋值后台的最新User数据\n          this.user = res.data\n        })\n      }\n\n    },\n  },\n\n  components:{\n    Navagation,\n  },\n  created() {\n    if(localStorage.getItem(\"user\")){\n      request.post(\"http://localhost:8888/role\").then(res=> {\n        if (res.code === '200') {\n          this.role = res.data;\n          if (localStorage.getItem(\"user\")) {\n            this.user = JSON.parse(localStorage.getItem(\"user\"));\n            this.loginStatus = true;\n          }\n        } else {\n          this.user = {nickname: '您未登录', avatarUrl: null};\n          localStorage.removeItem('user')\n          this.loginStatus = false;\n        }\n      })\n    }else{\n      this.user = {nickname: '您未登录', avatarUrl: null};\n      this.loginStatus = false;\n    }\n\n  }\n}\n</script>\n\n<style scoped>\n@import \"../../resource/css/search.css\";\n.image {\n  width: 100%;\n  display: block;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}