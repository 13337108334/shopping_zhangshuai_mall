{"ast":null,"code":"import \"core-js/modules/es.json.stringify.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport API from '../../../utils/request';\nvar url = \"/api/carousel/\";\nexport default {\n  name: \"Carousel\",\n  //初始化数据\n  data: function data() {\n    return {\n      baseApi: this.$store.state.baseApi,\n      options: [],\n      searchText: '',\n      user: {},\n      tableData: [],\n      pageNum: 1,\n      pageSize: 5,\n      entity: {},\n      total: 0,\n      dialogFormVisible: false\n    };\n  },\n  //页面加载完成\n  created: function created() {\n    this.load();\n  },\n  //犯法\n  methods: {\n    //分页页面变化\n    handleSizeChange: function handleSizeChange(pageSize) {\n      this.pageSize = pageSize;\n      this.load();\n    },\n    //翻页\n    handleCurrentChange: function handleCurrentChange(pageNum) {\n      this.pageNum = pageNum;\n      this.load();\n    },\n    //页面加载\n    load: function load() {\n      var _this = this;\n\n      API.get(url).then(function (res) {\n        _this.tableData = res.data || [];\n      });\n    },\n    //新增轮播图弹出\n    add: function add() {\n      this.entity = {};\n      this.tableData.length++;\n      this.dialogFormVisible = true;\n    },\n    //编辑\n    edit: function edit(row) {\n      this.entity = JSON.parse(JSON.stringify(row));\n      this.dialogFormVisible = true;\n    },\n    //保存轮播图\n    save: function save() {\n      var _this2 = this;\n\n      if (this.entity.goodId == undefined || this.entity.goodId === \"\") {\n        this.$message.error(\"商品id不能为空\");\n        return;\n      }\n\n      if (this.entity.showOrder == undefined) {\n        this.$message.error(\"轮播顺序不能为空\");\n        return;\n      } //调用后台接口\n\n\n      API.post(url, this.entity).then(function (res) {\n        if (res.code === '200') {\n          _this2.$message.success(\"保存成功\");\n\n          _this2.load();\n\n          _this2.dialogFormVisible = false;\n        } else {\n          _this2.$message.error(res.msg);\n        }\n      });\n    },\n    //删除轮播图\n    del: function del(id) {\n      var _this3 = this;\n\n      API.delete(url + id).then(function (res) {\n        if (res.code === '200') {\n          _this3.$message({\n            type: \"success\",\n            message: \"删除成功\"\n          });\n\n          _this3.load();\n        } else {\n          _this3.$message.error(res.msg);\n        }\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiFA;AACA;AAEA;AACAA,kBADA;AAEA;AACAC,MAHA,kBAGA;AACA;AACAC,wCADA;AAEAC,iBAFA;AAGAC,oBAHA;AAIAC,cAJA;AAKAC,mBALA;AAMAC,gBANA;AAOAC,iBAPA;AAQAC,gBARA;AASAC,cATA;AAUAC;AAVA;AAYA,GAhBA;AAiBA;AACAC,SAlBA,qBAkBA;AACA;AACA,GApBA;AAqBA;AACAC;AACA;AACAC,oBAFA,4BAEAN,QAFA,EAEA;AACA;AACA;AACA,KALA;AAMA;AACAO,uBAPA,+BAOAR,OAPA,EAOA;AACA;AACA;AACA,KAVA;AAWA;AACAS,QAZA,kBAYA;AAAA;;AACAC;AACA;AACA,OAFA;AAGA,KAhBA;AAiBA;AACAC,OAlBA,iBAkBA;AACA;AACA;AACA;AACA,KAtBA;AAuBA;AACAC,QAxBA,gBAwBAC,GAxBA,EAwBA;AACA;AACA;AACA,KA3BA;AA4BA;AACAC,QA7BA,kBA6BA;AAAA;;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA,OARA,CAUA;;;AACAJ;AACA;AACA;;AACA;;AACA;AACA,SAJA,MAIA;AACA;AACA;AAEA,OATA;AAUA,KAlDA;AAmDA;AACAK,OApDA,eAoDAC,EApDA,EAoDA;AAAA;;AACAN;AACA;AACA;AACAO,2BADA;AAEAC;AAFA;;AAIA;AACA,SANA,MAMA;AACA;AACA;AACA,OAVA;AAWA;AAhEA;AAtBA","names":["name","data","baseApi","options","searchText","user","tableData","pageNum","pageSize","entity","total","dialogFormVisible","created","methods","handleSizeChange","handleCurrentChange","load","API","add","edit","row","save","del","id","type","message"],"sourceRoot":"src/views/manage/good","sources":["Carousel.vue"],"sourcesContent":["<!--\r\n * 后台轮播图管理\r\n *\r\n * @author: ZhangDaYe\r\n * @Date: 2023-11-11\r\n-->\r\n<template>\r\n  <div>\r\n    <!--新增按钮-->\r\n    <div style=\"text-align: left\">\r\n      <el-button @click=\"add\" round type=\"success\" style=\"margin: 10px;width: 150px\">\r\n        <i class=\"el-icon-circle-plus\"style=\"padding-right: 6px\"></i>新增</el-button>\r\n    </div>\r\n\r\n    <div>\r\n\r\n      <!--表格-->\r\n      <el-table :data=\"tableData\" stripe border fixed style=\"width: 100%;margin: 2px auto\">\r\n\r\n        <el-table-column width=\"400\" label=\"商品\">\r\n          <template slot-scope=\"scope\">\r\n            <a :href=\"'/goodView/'+scope.row.goodId\">{{scope.row.goodName}}</a>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column width=\"350\"  label=\"图片\" >\r\n          <template  slot-scope=\"scope\">\r\n            <img :src=\"baseApi + scope.row.img\" width=\"200\" height=\"180\" />\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column prop=\"showOrder\" width=\"150\" label=\"轮播顺序\"></el-table-column>\r\n\r\n        <el-table-column\r\n            fixed=\"right\"\r\n            label=\"操作\"\r\n            width=\"400\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button type=\"primary\" icon=\"el-icon-edit\"   @click=\"edit(scope.row)\"></el-button>\r\n            <el-popconfirm\r\n                @confirm=\"del(scope.row.id)\"\r\n                title=\"确定删除？\"\r\n            >\r\n              <el-button type=\"danger\" icon=\"el-icon-delete\"  slot=\"reference\" style=\"margin-left: 10px\"></el-button>\r\n            </el-popconfirm>\r\n          </template>\r\n        </el-table-column>\r\n\r\n      </el-table>\r\n    </div>\r\n\r\n    <!-- 新增轮播图弹窗   -->\r\n    <el-dialog title=\"信息\" :visible.sync=\"dialogFormVisible\" width=\"30%\"\r\n               :close-on-click-modal=\"false\">\r\n\r\n      <el-form :model=\"entity\">\r\n\r\n        <el-form-item label=\"商品id\" label-width=\"150px\">\r\n          <el-input v-model=\"entity.goodId\" autocomplete=\"off\" style=\"width: 80%\"></el-input>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"轮播顺序\" label-width=\"150px\">\r\n          <el-select v-model=\"entity.showOrder\">\r\n            <el-option v-for=\"index in tableData.length\" :key=\"index\" :label=\"index\" :value=\"index\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n\r\n      </el-form>\r\n\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"save\">确 定</el-button>\r\n      </div>\r\n\r\n    </el-dialog>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport API from '../../../utils/request'\r\nconst url = \"/api/carousel/\"\r\n\r\nexport default {\r\n  name: \"Carousel\",\r\n  //初始化数据\r\n  data() {\r\n    return {\r\n      baseApi: this.$store.state.baseApi,\r\n      options: [],\r\n      searchText: '',\r\n      user: {},\r\n      tableData: [],\r\n      pageNum: 1,\r\n      pageSize: 5,\r\n      entity: {},\r\n      total: 0,\r\n      dialogFormVisible: false\r\n    };\r\n  },\r\n  //页面加载完成\r\n  created() {\r\n    this.load()\r\n  },\r\n  //犯法\r\n  methods: {\r\n    //分页页面变化\r\n    handleSizeChange(pageSize) {\r\n      this.pageSize = pageSize\r\n      this.load()\r\n    },\r\n    //翻页\r\n    handleCurrentChange(pageNum) {\r\n      this.pageNum = pageNum\r\n      this.load()\r\n    },\r\n    //页面加载\r\n    load() {\r\n      API.get(url).then(res => {\r\n        this.tableData = res.data || []\r\n      })\r\n    },\r\n    //新增轮播图弹出\r\n    add() {\r\n      this.entity = {}\r\n      this.tableData.length++;\r\n      this.dialogFormVisible = true\r\n    },\r\n    //编辑\r\n    edit(row) {\r\n      this.entity = JSON.parse(JSON.stringify(row))\r\n      this.dialogFormVisible = true\r\n    },\r\n    //保存轮播图\r\n    save() {\r\n      if(this.entity.goodId == undefined || this.entity.goodId === \"\") {\r\n          this.$message.error(\"商品id不能为空\")\r\n          return;\r\n      }\r\n      if(this.entity.showOrder == undefined) {\r\n          this.$message.error(\"轮播顺序不能为空\")\r\n          return;\r\n      }\r\n\r\n      //调用后台接口\r\n      API.post(url, this.entity).then(res => {\r\n        if (res.code === '200') {\r\n          this.$message.success(\"保存成功\")\r\n          this.load()\r\n          this.dialogFormVisible = false\r\n        } else {\r\n          this.$message.error(res.msg)\r\n        }\r\n\r\n      })\r\n    },\r\n    //删除轮播图\r\n    del(id) {\r\n      API.delete(url + id).then(res => {\r\n        if(res.code==='200'){\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"删除成功\",\r\n          });\r\n          this.load();\r\n        }else {\r\n          this.$message.error(res.msg);\r\n        }\r\n      })\r\n    }\r\n  },\r\n};\r\n</script>\r\n"]},"metadata":{},"sourceType":"module"}