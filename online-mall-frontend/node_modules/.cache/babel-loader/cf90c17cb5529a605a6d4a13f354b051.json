{"ast":null,"code":"import \"core-js/modules/es.json.stringify.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport API from '../../../utils/request';\nvar url = \"/api/carousel/\";\nexport default {\n  name: \"Carousel\",\n  //初始化数据\n  data: function data() {\n    return {\n      baseApi: this.$store.state.baseApi,\n      options: [],\n      searchText: '',\n      user: {},\n      tableData: [],\n      pageNum: 1,\n      pageSize: 5,\n      entity: {},\n      total: 0,\n      dialogFormVisible: false\n    };\n  },\n  //页面加载完成\n  created: function created() {\n    this.load();\n  },\n  //犯法\n  methods: {\n    //分页页面变化\n    handleSizeChange: function handleSizeChange(pageSize) {\n      this.pageSize = pageSize;\n      this.load();\n    },\n    //翻页\n    handleCurrentChange: function handleCurrentChange(pageNum) {\n      this.pageNum = pageNum;\n      this.load();\n    },\n    //页面加载\n    load: function load() {\n      var _this = this;\n\n      API.get(url).then(function (res) {\n        _this.tableData = res.data || [];\n      });\n    },\n    //新增轮播图弹出\n    add: function add() {\n      this.entity = {};\n      this.tableData.length++;\n      this.dialogFormVisible = true;\n    },\n    //编辑\n    edit: function edit(row) {\n      this.entity = JSON.parse(JSON.stringify(row));\n      this.dialogFormVisible = true;\n    },\n    //保存轮播图\n    save: function save() {\n      var _this2 = this;\n\n      if (this.entity.goodId == undefined || this.entity.goodId === \"\") {\n        this.$message.error(\"商品id不能为空\");\n        return;\n      }\n\n      if (this.entity.showOrder == undefined) {\n        this.$message.error(\"轮播顺序不能为空\");\n        return;\n      } //调用后台接口\n\n\n      API.post(url, this.entity).then(function (res) {\n        if (res.code === '200') {\n          _this2.$message.success(\"保存成功\");\n\n          _this2.load();\n\n          _this2.dialogFormVisible = false;\n        } else {\n          _this2.$message.error(res.msg);\n        }\n      });\n    },\n    //删除轮播图\n    del: function del(id) {\n      var _this3 = this;\n\n      API.delete(url + id).then(function (res) {\n        if (res.code === '200') {\n          _this3.$message({\n            type: \"success\",\n            message: \"删除成功\"\n          });\n\n          _this3.load();\n        } else {\n          _this3.$message.error(res.msg);\n        }\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiFA;AACA;AAEA;AACAA,kBADA;AAEA;AACAC,MAHA,kBAGA;AACA;AACAC,wCADA;AAEAC,iBAFA;AAGAC,oBAHA;AAIAC,cAJA;AAKAC,mBALA;AAMAC,gBANA;AAOAC,iBAPA;AAQAC,gBARA;AASAC,cATA;AAUAC;AAVA;AAYA,GAhBA;AAiBA;AACAC,SAlBA,qBAkBA;AACA;AACA,GApBA;AAqBA;AACAC;AACA;AACAC,oBAFA,4BAEAN,QAFA,EAEA;AACA;AACA;AACA,KALA;AAMA;AACAO,uBAPA,+BAOAR,OAPA,EAOA;AACA;AACA;AACA,KAVA;AAWA;AACAS,QAZA,kBAYA;AAAA;;AACAC;AACA;AACA,OAFA;AAGA,KAhBA;AAiBA;AACAC,OAlBA,iBAkBA;AACA;AACA;AACA;AACA,KAtBA;AAuBA;AACAC,QAxBA,gBAwBAC,GAxBA,EAwBA;AACA;AACA;AACA,KA3BA;AA4BA;AACAC,QA7BA,kBA6BA;AAAA;;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA,OARA,CAUA;;;AACAJ;AACA;AACA;;AACA;;AACA;AACA,SAJA,MAIA;AACA;AACA;AAEA,OATA;AAUA,KAlDA;AAmDA;AACAK,OApDA,eAoDAC,EApDA,EAoDA;AAAA;;AACAN;AACA;AACA;AACAO,2BADA;AAEAC;AAFA;;AAIA;AACA,SANA,MAMA;AACA;AACA;AACA,OAVA;AAWA;AAhEA;AAtBA","names":["name","data","baseApi","options","searchText","user","tableData","pageNum","pageSize","entity","total","dialogFormVisible","created","methods","handleSizeChange","handleCurrentChange","load","API","add","edit","row","save","del","id","type","message"],"sourceRoot":"src/views/manage/good","sources":["Carousel.vue"],"sourcesContent":["<!--\n * 后台轮播图管理\n *\n * @ZhangShuai: ShanZhu\n * @Date: 2023-11-11\n-->\n<template>\n  <div>\n    <!--新增按钮-->\n    <div style=\"text-align: left\">\n      <el-button @click=\"add\" round type=\"success\" style=\"margin: 10px;width: 150px\">\n        <i class=\"el-icon-circle-plus\"style=\"padding-right: 6px\"></i>新增</el-button>\n    </div>\n\n    <div>\n\n      <!--表格-->\n      <el-table :data=\"tableData\" stripe border fixed style=\"width: 100%;margin: 2px auto\">\n\n        <el-table-column width=\"400\" label=\"商品\">\n          <template slot-scope=\"scope\">\n            <a :href=\"'/goodView/'+scope.row.goodId\">{{scope.row.goodName}}</a>\n          </template>\n        </el-table-column>\n\n        <el-table-column width=\"350\"  label=\"图片\" >\n          <template  slot-scope=\"scope\">\n            <img :src=\"baseApi + scope.row.img\" width=\"200\" height=\"180\" />\n          </template>\n        </el-table-column>\n\n        <el-table-column prop=\"showOrder\" width=\"150\" label=\"轮播顺序\"></el-table-column>\n\n        <el-table-column\n            fixed=\"right\"\n            label=\"操作\"\n            width=\"400\">\n          <template slot-scope=\"scope\">\n            <el-button type=\"primary\" icon=\"el-icon-edit\"   @click=\"edit(scope.row)\"></el-button>\n            <el-popconfirm\n                @confirm=\"del(scope.row.id)\"\n                title=\"确定删除？\"\n            >\n              <el-button type=\"danger\" icon=\"el-icon-delete\"  slot=\"reference\" style=\"margin-left: 10px\"></el-button>\n            </el-popconfirm>\n          </template>\n        </el-table-column>\n\n      </el-table>\n    </div>\n\n    <!-- 新增轮播图弹窗   -->\n    <el-dialog title=\"信息\" :visible.sync=\"dialogFormVisible\" width=\"30%\"\n               :close-on-click-modal=\"false\">\n\n      <el-form :model=\"entity\">\n\n        <el-form-item label=\"商品id\" label-width=\"150px\">\n          <el-input v-model=\"entity.goodId\" autocomplete=\"off\" style=\"width: 80%\"></el-input>\n        </el-form-item>\n\n        <el-form-item label=\"轮播顺序\" label-width=\"150px\">\n          <el-select v-model=\"entity.showOrder\">\n            <el-option v-for=\"index in tableData.length\" :key=\"index\" :label=\"index\" :value=\"index\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n\n      </el-form>\n\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"save\">确 定</el-button>\n      </div>\n\n    </el-dialog>\n\n  </div>\n</template>\n\n<script>\nimport API from '../../../utils/request'\nconst url = \"/api/carousel/\"\n\nexport default {\n  name: \"Carousel\",\n  //初始化数据\n  data() {\n    return {\n      baseApi: this.$store.state.baseApi,\n      options: [],\n      searchText: '',\n      user: {},\n      tableData: [],\n      pageNum: 1,\n      pageSize: 5,\n      entity: {},\n      total: 0,\n      dialogFormVisible: false\n    };\n  },\n  //页面加载完成\n  created() {\n    this.load()\n  },\n  //犯法\n  methods: {\n    //分页页面变化\n    handleSizeChange(pageSize) {\n      this.pageSize = pageSize\n      this.load()\n    },\n    //翻页\n    handleCurrentChange(pageNum) {\n      this.pageNum = pageNum\n      this.load()\n    },\n    //页面加载\n    load() {\n      API.get(url).then(res => {\n        this.tableData = res.data || []\n      })\n    },\n    //新增轮播图弹出\n    add() {\n      this.entity = {}\n      this.tableData.length++;\n      this.dialogFormVisible = true\n    },\n    //编辑\n    edit(row) {\n      this.entity = JSON.parse(JSON.stringify(row))\n      this.dialogFormVisible = true\n    },\n    //保存轮播图\n    save() {\n      if(this.entity.goodId == undefined || this.entity.goodId === \"\") {\n          this.$message.error(\"商品id不能为空\")\n          return;\n      }\n      if(this.entity.showOrder == undefined) {\n          this.$message.error(\"轮播顺序不能为空\")\n          return;\n      }\n\n      //调用后台接口\n      API.post(url, this.entity).then(res => {\n        if (res.code === '200') {\n          this.$message.success(\"保存成功\")\n          this.load()\n          this.dialogFormVisible = false\n        } else {\n          this.$message.error(res.msg)\n        }\n\n      })\n    },\n    //删除轮播图\n    del(id) {\n      API.delete(url + id).then(res => {\n        if(res.code==='200'){\n          this.$message({\n            type: \"success\",\n            message: \"删除成功\",\n          });\n          this.load();\n        }else {\n          this.$message.error(res.msg);\n        }\n      })\n    }\n  },\n};\n</script>\n"]},"metadata":{},"sourceType":"module"}